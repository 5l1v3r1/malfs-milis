# Description: The cross-platform media player and streaming server
# URL: http://www.videolan.org/vlc/
# Maintainer:  Thomas Penteker, tek at serverop dot de
# Packager: milisarge@gmail.com
# Depends on: libbluray opus qt5 x264 flac libmad glib librsvg alsa-lib xorg-libxinerama xorg-libxpm libvpx libcdio vcdimager live libdvdcss libdvdread libdvdnav libogg libtheora lame faac libvorbis ffmpeg faad2 liba52 libmpeg2 libmpcdec fribidi lua libdv speex

name=vlc
version=3.0.0
_version=20160606
release=1

source=( http://anduin.linuxfromscratch.org/BLFS/$name/$name-$version-${_version}.tar.xz
         lua53_compat.patch
         update-vlc-plugin-cache.hook)
	
build() {

cd $name-$version-${_version}
patch -Np1 -i ../lua53_compat.patch

sed -i '/seems to be moved/s/^/#/' autotools/ltmain.sh

BUILDCC=gcc \
./configure --prefix=/usr \
            --sysconfdir=/etc \
            --enable-bluray \
            --enable-opus \
            RCC=/usr/bin/rcc-qt5

make
make DESTDIR=$PKG docdir=/usr/share/doc/$name-$version install

install -Dm644 ../update-vlc-plugin-cache.hook $PKG/usr/share/libalpm/hooks/update-vlc-plugin-cache.hook

rm -rf $PKG/usr/share/doc
}
