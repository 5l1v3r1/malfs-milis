# Description: API multimedia of KDE. the replaces the old aRts, which is more supported by KDE.
# URL: http://www.kde.org
# Packager: alihan-ozturk28@hotmail.com
# Depends on: qt4 glib pulseaudio

name=phonon-qt4
version=4.9.0
release=1

source=(http://download.kde.org/stable/$name/$version/src/$name-$version.tar.xz)
build() {
cd $name-$version
cmake -DCMAKE_BUILD_TYPE=Release \
      -DCMAKE_SKIP_RPATH=ON \
      -DCMAKE_INSTALL_PREFIX=/usr \
      -DPHONON_INSTALL_QT_EXTENSIONS_INTO_SYSTEM_QT=ON \
      -D__KDE_HAVE_GCC_VISIBILITY=NO \
      -DCMAKE_INSTALL_LIBDIR=lib

make
make DESTDIR=$PKG install

install -d $PKG/usr/include/qt4
mv $PKG/usr/include/{phonon,KDE} $PKG/usr/include/qt4/
sed -i 's#includedir=/usr/include#includedir=/usr/include/qt4#' \
        $PKG/usr/lib/pkgconfig/phonon.pc
}
